#include <stdio.h>
#include <string.h>
#include <mpi.h>

int main(int argc, char **argv) {
        int my_rank, p, tag = 0;
        char msg[20];
        MPI_Status status;

        MPI_Init(&argc, &argv);
        MPI_Comm_rank(MPI_COMM_WORLD, &my_rank);
        MPI_Comm_size(MPI_COMM_WORLD, &p);

        if (my_rank == 0) {
                strcpy(msg, "Hello ");
                printf("msg= %s",msg);
                MPI_Send(msg, 20, MPI_CHAR, 1, tag, MPI_COMM_WORLD, &status);
                
                MPI_Recv(msg, 20, MPI_CHAR, 1, tag, MPI_COMM_WORLD, &status);
                printf("msg Send from Node %d",my_rank);
        } else if (my_rank == 1) {

        MPI_Recv(msg, 20, MPI_CHAR, 0, tag, MPI_COMM_WORLD, &status);
        printf("The message %s was Recv by the Node %d",msg,my_rank);
        
       for(char *p = msg;*p;++p) *p=*p>0x40&&*p<0x5b?*p|0x60:*p;
        
        MPI_Send(msg, 20, MPI_CHAR, 0, tag, MPI_COMM_WORLD, &status);

}
        MPI_Finalize();
}
